# bazel-17897

https://github.com/bazelbuild/bazel/issues/17897

```sh
‚ùØ bazel build @com_github_sourcegraph_sourcegraph//cmd/frontend
Loading: 0 packages loaded
    Fetching repository @com_github_sourcegraph_sourcegraph; starting
FATAL: bazel crashed due to an internal error. Printing stack trace:
java.lang.RuntimeException: Unrecoverable error while evaluating node 'REPOSITORY_DIRECTORY:@com_github_sourcegraph_sourcegraph' (requested by nodes 'IGNORED_PACKAGE_PREFIXES:@com_github_sourcegraph_sourcegraph')
        at com.google.devtools.build.skyframe.AbstractParallelEvaluator$Evaluate.run(AbstractParallelEvaluator.java:642)
        at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:382)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.base/java.lang.Thread.run(Unknown Source)
Caused by: net.starlark.java.eval.Starlark$UncheckedEvalException: IndexOutOfBoundsException thrown during Starlark evaluation (LOADING)
        at <starlark>.patch(<builtin>:0)
        at <starlark>.patch(/home/thomas/.cache/bazel/_bazel_thomas/f89decf00a88ac1ef0dab92ddec6f645/external/bazel_tools/tools/build_defs/repo/utils.bzl:167)
        at <starlark>._http_archive_impl(/home/thomas/.cache/bazel/_bazel_thomas/f89decf00a88ac1ef0dab92ddec6f645/external/bazel_tools/tools/build_defs/repo/http.bzl:143)
Caused by: java.lang.IndexOutOfBoundsException: Index 71 out of bounds for length 71
        at java.base/jdk.internal.util.Preconditions.outOfBounds(Unknown Source)
        at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Unknown Source)
        at java.base/jdk.internal.util.Preconditions.checkIndex(Unknown Source)
        at java.base/java.util.Objects.checkIndex(Unknown Source)
        at java.base/java.util.ArrayList.get(Unknown Source)
        at com.github.difflib.patch.Chunk.verify(Chunk.java:72)
        at com.github.difflib.patch.AbstractDelta.verifyChunk(AbstractDelta.java:57)
        at com.github.difflib.patch.ChangeDelta.applyTo(ChangeDelta.java:43)
        at com.google.devtools.build.lib.bazel.repository.PatchUtil.applyDelta(PatchUtil.java:149)
        at com.google.devtools.build.lib.bazel.repository.PatchUtil.applyTo(PatchUtil.java:103)
        at com.google.devtools.build.lib.bazel.repository.PatchUtil.applyOffsetPatchTo(PatchUtil.java:90)
        at com.google.devtools.build.lib.bazel.repository.PatchUtil.applyPatchToFile(PatchUtil.java:303)
        at com.google.devtools.build.lib.bazel.repository.PatchUtil.apply(PatchUtil.java:648)
        at com.google.devtools.build.lib.bazel.repository.starlark.StarlarkRepositoryContext.patch(StarlarkRepositoryContext.java:399)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.base/java.lang.reflect.Method.invoke(Unknown Source)
        at net.starlark.java.eval.MethodDescriptor.call(MethodDescriptor.java:162)
        at net.starlark.java.eval.BuiltinFunction.fastcall(BuiltinFunction.java:77)
        at net.starlark.java.eval.Starlark.fastcall(Starlark.java:638)
        at net.starlark.java.eval.Eval.evalCall(Eval.java:682)
        at net.starlark.java.eval.Eval.eval(Eval.java:497)
        at net.starlark.java.eval.Eval.exec(Eval.java:271)
        at net.starlark.java.eval.Eval.execStatements(Eval.java:82)
        at net.starlark.java.eval.Eval.execFor(Eval.java:126)
        at net.starlark.java.eval.Eval.exec(Eval.java:276)
        at net.starlark.java.eval.Eval.execStatements(Eval.java:82)
        at net.starlark.java.eval.Eval.execIf(Eval.java:205)
        at net.starlark.java.eval.Eval.exec(Eval.java:283)
        at net.starlark.java.eval.Eval.execStatements(Eval.java:82)
        at net.starlark.java.eval.Eval.execFunctionBody(Eval.java:66)
        at net.starlark.java.eval.StarlarkFunction.fastcall(StarlarkFunction.java:173)
        at net.starlark.java.eval.Starlark.fastcall(Starlark.java:638)
        at net.starlark.java.eval.Eval.evalCall(Eval.java:682)
        at net.starlark.java.eval.Eval.eval(Eval.java:497)
        at net.starlark.java.eval.Eval.exec(Eval.java:271)
        at net.starlark.java.eval.Eval.execStatements(Eval.java:82)
        at net.starlark.java.eval.Eval.execFunctionBody(Eval.java:66)
        at net.starlark.java.eval.StarlarkFunction.fastcall(StarlarkFunction.java:173)
        at net.starlark.java.eval.Starlark.fastcall(Starlark.java:638)
        at net.starlark.java.eval.Starlark.call(Starlark.java:604)
        at com.google.devtools.build.lib.bazel.repository.starlark.StarlarkRepositoryFunction.fetch(StarlarkRepositoryFunction.java:220)
        at com.google.devtools.build.lib.rules.repository.RepositoryDelegatorFunction.fetchRepository(RepositoryDelegatorFunction.java:413)
        at com.google.devtools.build.lib.rules.repository.RepositoryDelegatorFunction.compute(RepositoryDelegatorFunction.java:344)
        at com.google.devtools.build.skyframe.AbstractParallelEvaluator$Evaluate.run(AbstractParallelEvaluator.java:571)
        at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:382)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.base/java.lang.Thread.run(Unknown Source)
```
